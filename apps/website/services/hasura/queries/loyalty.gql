query loyalty_programs($take: Int!, $skip: Int!) {
  loyalty_program(limit: $take, offset: $skip) {
    ...loyalty
  }
}

query loyalty_program($id: uuid!) {
  loyalty_program_by_pk(id: $id) {
    ...loyalty
  }
}

query loyalty_programs_by_organization_id($id: uuid!) {
  loyalty_program(where: { organization_id: { _eq: $id } }) {
    ...loyalty
  }
}

query get_gate_progress_completed_by_loyalty_program(
  $userId: uuid!
  $loyaltyProgramId: uuid!
) {
  credentials(
    where: {
      gate: { loyalty_id: {_eq: $loyaltyProgramId}},
      target_id: {_eq: $userId}
    }
  ) {
    gate {
      id
      points
      published
    }
  }
}

query protocol_credential_by_loyalty_id_by_gate_id(
  $user_id: String!
  $loyalty_id: String!
  $gate_id: String
) {
  loyalty_protocol_credential(
    user_id: $user_id
    loyalty_id: $loyalty_id
    gate_id: $gate_id
  ) {
    credential
  }
}
